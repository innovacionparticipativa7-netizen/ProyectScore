<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login</title>

<style>
  * {
    box-sizing: border-box;
    font-family: Arial, sans-serif;
  }

  body {
    min-height: 100vh;
    margin: 0;
    background: linear-gradient(135deg, #4caf50, #2e7d32);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 16px;
  }

  .login-card {
    width: 100%;
    max-width: 360px;
    background: #fff;
    padding: 24px;
    border-radius: 16px;
    box-shadow: 0 10px 25px rgba(0,0,0,.25);
  }

  .login-card h2 {
    text-align: center;
    margin-bottom: 6px;
  }

  .login-card p {
    text-align: center;
    font-size: 14px;
    color: #666;
    margin-bottom: 20px;
  }

  .campo {
    margin-bottom: 14px;
  }

  .campo label {
    font-size: 13px;
    color: #555;
    display: block;
    margin-bottom: 4px;
  }

  .campo input {
    width: 100%;
    padding: 12px;
    border-radius: 8px;
    border: 1px solid #ccc;
    font-size: 14px;
    transition: border .2s, box-shadow .2s;
  }

  .campo input:focus {
    outline: none;
    border-color: #4caf50;
    box-shadow: 0 0 0 2px rgba(76,175,80,.25);
  }

  .btn-login {
    width: 100%;
    padding: 12px;
    border: none;
    border-radius: 10px;
    background: linear-gradient(135deg, #4caf50, #2e7d32);
    color: white;
    font-size: 15px;
    font-weight: bold;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0,0,0,.25);
    transition: transform .15s ease, box-shadow .15s ease, opacity .15s;
  }

  .btn-login:hover {
    transform: translateY(-1px);
    box-shadow: 0 6px 14px rgba(0,0,0,.3);
    opacity: .95;
  }

  .btn-login:active {
    transform: scale(.98);
  }

  .footer {
    text-align: center;
    font-size: 12px;
    color: #888;
    margin-top: 14px;
  }
</style>
</head>

<body>

<div class="login-card">
  <h2>Iniciar sesión</h2>
  <p>Accede al panel de proyectos</p>

  <div class="campo">
    <label>Usuario</label>
    <input id="user" placeholder="Tu usuario">
  </div>

  <div class="campo">
    <label>Contraseña</label>
    <input id="pass" type="password" placeholder="••••••••">
  </div>

  <button class="btn-login" onclick="login()">Entrar</button>

  <div class="footer">
    © Panel de Proyectos
  </div>
</div>

<script type="module">
import { auth, db } from "./firebase.js";
import { signInWithEmailAndPassword } from
  "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { doc, getDoc } from
  "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

window.login = async () => {
  const user = document.getElementById("user").value.trim();
  const pass = document.getElementById("pass").value;

  const emailFake = `${user}@proyects.com`;

  try {
    const cred = await signInWithEmailAndPassword(auth, emailFake, pass);
    const uid = cred.user.uid;

    const snap = await getDoc(doc(db, "users", uid));
    localStorage.setItem("uid", uid);
    localStorage.setItem("rol", snap.data().rol);

    location.href = "app.html";
  } catch {
    alert("Usuario o contraseña incorrectos");
  }
};
</script>

</body>
</html>






