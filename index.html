<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Login</title>
  <style>
    body {
      font-family: Arial;
      background:#f4f6f8;
      display:flex;
      justify-content:center;
      align-items:center;
      height:100vh;
    }
    .login {
      background:white;
      padding:30px;
      border-radius:10px;
      width:300px;
      box-shadow:0 4px 10px rgba(0,0,0,.1);
    }
    input, button {
      width:100%;
      padding:10px;
      margin-top:10px;
    }
    button {
      background:#007bff;
      color:white;
      border:none;
      cursor:pointer;
    }
  </style>
</head>
<body>

<div class="login">
  <h2>Iniciar sesión</h2>
  <input id="email" placeholder="Email">
  <input id="password" type="password" placeholder="Contraseña">
  <button onclick="login()">Entrar</button>
</div>

<script type="module" src="firebase.js"></script>
<script type="module">
  import { auth, db } from "./firebase.js";
  import { signInWithEmailAndPassword } from
    "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
  import { doc, getDoc } from
    "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  window.login = async function () {
    const email = email.value;
    const password = password.value;

    try {
      const cred = await signInWithEmailAndPassword(auth, email, password);
      const uid = cred.user.uid;

      const snap = await getDoc(doc(db, "users", uid));
      localStorage.setItem("rol", snap.data().rol);
      localStorage.setItem("uid", uid);

      window.location = "dashboard.html";
    } catch (e) {
      alert("Error de login");
    }
  };
</script>

</body>
</html>


</body>
</html>

